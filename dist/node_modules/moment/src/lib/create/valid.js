"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const extend_1 = require("../utils/extend");
const utc_1 = require("./utc");
const parsing_flags_1 = require("../create/parsing-flags");
const some_1 = require("../utils/some");
function isValid(m) {
    if (m._isValid == null) {
        var flags = parsing_flags_1.default(m);
        var parsedParts = some_1.default.call(flags.parsedDateParts, function (i) {
            return i != null;
        });
        var isNowValid = !isNaN(m._d.getTime()) &&
            flags.overflow < 0 &&
            !flags.empty &&
            !flags.invalidMonth &&
            !flags.invalidWeekday &&
            !flags.weekdayMismatch &&
            !flags.nullInput &&
            !flags.invalidFormat &&
            !flags.userInvalidated &&
            (!flags.meridiem || (flags.meridiem && parsedParts));
        if (m._strict) {
            isNowValid = isNowValid &&
                flags.charsLeftOver === 0 &&
                flags.unusedTokens.length === 0 &&
                flags.bigHour === undefined;
        }
        if (Object.isFrozen == null || !Object.isFrozen(m)) {
            m._isValid = isNowValid;
        }
        else {
            return isNowValid;
        }
    }
    return m._isValid;
}
exports.isValid = isValid;
function createInvalid(flags) {
    var m = utc_1.createUTC(NaN);
    if (flags != null) {
        extend_1.default(parsing_flags_1.default(m), flags);
    }
    else {
        parsing_flags_1.default(m).userInvalidated = true;
    }
    return m;
}
exports.createInvalid = createInvalid;
//# sourceMappingURL=valid.js.map