"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const hooks_1 = require("../utils/hooks");
const is_undefined_1 = require("../utils/is-undefined");
const parsing_flags_1 = require("../create/parsing-flags");
// Plugins that add properties should also add the key here (null value),
// so we can properly clone ourselves.
var momentProperties = hooks_1.hooks.momentProperties = [];
function copyConfig(to, from) {
    var i, prop, val;
    if (!is_undefined_1.default(from._isAMomentObject)) {
        to._isAMomentObject = from._isAMomentObject;
    }
    if (!is_undefined_1.default(from._i)) {
        to._i = from._i;
    }
    if (!is_undefined_1.default(from._f)) {
        to._f = from._f;
    }
    if (!is_undefined_1.default(from._l)) {
        to._l = from._l;
    }
    if (!is_undefined_1.default(from._strict)) {
        to._strict = from._strict;
    }
    if (!is_undefined_1.default(from._tzm)) {
        to._tzm = from._tzm;
    }
    if (!is_undefined_1.default(from._isUTC)) {
        to._isUTC = from._isUTC;
    }
    if (!is_undefined_1.default(from._offset)) {
        to._offset = from._offset;
    }
    if (!is_undefined_1.default(from._pf)) {
        to._pf = parsing_flags_1.default(from);
    }
    if (!is_undefined_1.default(from._locale)) {
        to._locale = from._locale;
    }
    if (momentProperties.length > 0) {
        for (i = 0; i < momentProperties.length; i++) {
            prop = momentProperties[i];
            val = from[prop];
            if (!is_undefined_1.default(val)) {
                to[prop] = val;
            }
        }
    }
    return to;
}
exports.copyConfig = copyConfig;
var updateInProgress = false;
// Moment prototype object
function Moment(config) {
    copyConfig(this, config);
    this._d = new Date(config._d != null ? config._d.getTime() : NaN);
    if (!this.isValid()) {
        this._d = new Date(NaN);
    }
    // Prevent infinite loop in case updateOffset creates new moment
    // objects.
    if (updateInProgress === false) {
        updateInProgress = true;
        hooks_1.hooks.updateOffset(this);
        updateInProgress = false;
    }
}
exports.Moment = Moment;
function isMoment(obj) {
    return obj instanceof Moment || (obj != null && obj._isAMomentObject != null);
}
exports.isMoment = isMoment;
//# sourceMappingURL=constructor.js.map